!function(){function t(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function e(t,e,i){if(!e.has(t))throw TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function i(t,i){var s=e(t,i,"get");return s.get?s.get.call(t):s.value}function s(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function n(t,e,i){s(t,e),e.set(t,i)}function a(t,i,s){var n=e(t,i,"set");return!function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=i}}(t,n,s),s}function r(t,e,i){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return i}function h(t,e){s(t,e),e.add(t)}function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function l(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}var u=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],c={left:"left",right:"right",up:"up",down:"down"},f={start:"start",restart:"restart"},d={idle:"idle",playing:"playing",win:"win",lose:"lose"},v={up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight"},g=function(t){var e=document.createElement("td");return e.classList.add(t),e},m=function(t){var e=document.createElement("tr");return e.classList.add(t),e},w=function(t){return t[0].toUpperCase()+t.slice(1)},y=/*#__PURE__*/function(){function e(i){t(this,e),this.game=i,this.handleKeyDown=this.handleKeyDown.bind(this),this.setController()}return l(e,[{key:"setController",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"removeController",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"handleKeyDown",value:function(t){if(this.game.getStatus()!==d.idle){var e=JSON.stringify(this.game.getState());switch(this.game.showStatus(),t.key){case v.up:this.game.moveUp();break;case v.down:this.game.moveDown();break;case v.left:this.game.moveLeft();break;case v.right:this.game.moveRight()}JSON.stringify(this.game.getState())!==e&&(this.game.createNewCell(),this.game.updateBoard(this.game.getState()))}}}]),e}(),p=/*#__PURE__*/function(){function e(){t(this,e)}return l(e,[{key:"isMoveLeft",value:function(t){for(var e=t.length-1;e>=0;e--)for(var i=t.length-1;i>=0;i--)if(t[e][i-1]===t[e][i])return!0;return!1}},{key:"isMoveRight",value:function(t){for(var e=0;e<t.length;e++)for(var i=0;i<t.length;i++)if(t[e][i]===t[e][i+1])return!0;return!1}},{key:"isMoveUp",value:function(t){for(var e=t.length-1;e>=1;e--)for(var i=t.length-1;i>=0;i--)if(t[e][i]===t[e-1][i])return!0;return!1}},{key:"isMoveDown",value:function(t){for(var e=0;e<t.length-1;e++)for(var i=0;i<t.length;i++)if(t[e][i]===t[e+1][i])return!0;return!1}}]),e}(),k=/*#__PURE__*/new WeakMap,S=/*#__PURE__*/new WeakMap,L=/*#__PURE__*/new WeakMap,b=/*#__PURE__*/new WeakMap,M=/*#__PURE__*/new WeakSet,W=/*#__PURE__*/new WeakSet,C=/*#__PURE__*/new WeakSet,D=/*#__PURE__*/new WeakSet,E=/*#__PURE__*/new WeakSet,B=/*#__PURE__*/new WeakSet,q=/*#__PURE__*/new WeakSet,N=/*#__PURE__*/new WeakSet,T=/*#__PURE__*/new WeakSet,U=/*#__PURE__*/function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;t(this,e),h(this,M),h(this,W),h(this,C),h(this,D),h(this,E),h(this,B),h(this,q),h(this,N),h(this,T),n(this,k,{writable:!0,value:0}),n(this,S,{writable:!0,value:[]}),n(this,L,{writable:!0,value:!1}),n(this,b,{writable:!0,value:null}),this.tbody=document.querySelector("table tbody"),this.htmlScore=document.querySelector(".game-score"),this.messageLose=document.querySelector(".message-lose"),this.messageWin=document.querySelector(".message-win"),this.messageStart=document.querySelector(".message-start"),a(this,S,i),a(this,k,0),a(this,L,!1),a(this,b,null)}return l(e,[{key:"moveLeft",value:function(){for(var t=i(this,S).length-1;t>=0;t--)for(var e=i(this,S).length-1;e>=0;e--)0===i(this,S)[t][e-1]&&(i(this,S)[t][e-1]=i(this,S)[t][e],i(this,S)[t][e]=0),r(this,E,A).call(this,t,e,c.left);r(this,q,j).call(this),this.updateBoard(i(this,S))}},{key:"moveRight",value:function(){for(var t=0;t<i(this,S).length;t++)for(var e=0;e<i(this,S).length;e++)0===i(this,S)[t][e+1]&&(i(this,S)[t][e+1]=i(this,S)[t][e],i(this,S)[t][e]=0),r(this,E,A).call(this,t,e,c.right);r(this,q,j).call(this),this.updateBoard(i(this,S))}},{key:"moveUp",value:function(){for(var t=i(this,S).length-1;t>=1;t--)for(var e=i(this,S).length-1;e>=0;e--)0===i(this,S)[t-1][e]&&(i(this,S)[t-1][e]=i(this,S)[t][e],i(this,S)[t][e]=0),r(this,B,O).call(this,t,e,c.up);r(this,q,j).call(this),this.updateBoard(i(this,S))}},{key:"moveDown",value:function(){for(var t=0;t<i(this,S).length-1;t++)for(var e=0;e<i(this,S).length;e++)0===i(this,S)[t+1][e]&&(i(this,S)[t+1][e]=i(this,S)[t][e],i(this,S)[t][e]=0),r(this,B,O).call(this,t,e,c.down);r(this,q,j).call(this),this.updateBoard(i(this,S))}},{key:"getState",value:function(){return i(this,S)}},{key:"getStatus",value:function(){var t=new p,e=t.isMoveLeft,s=t.isMoveRight,n=t.isMoveDown,a=t.isMoveUp;return i(this,L)?!i(this,S).every(function(t){return t.every(function(t){return 0!==t})})||e(i(this,S))||s(i(this,S))||a(i(this,S))||n(i(this,S))?i(this,S).some(function(t){return t.some(function(t){return 2048===t})})?d.win:d.playing:d.lose:d.idle}},{key:"showStatus",value:function(){var t=this.getStatus();t===d.win&&(a(this,L,!1),this.messageWin.classList.remove("hidden")),t===d.lose&&(a(this,L,!1),this.messageLose.classList.remove("hidden"))}},{key:"start",value:function(){a(this,L,!0),this.messageStart.classList.add("hidden"),a(this,b,new y(this)),this.createNewCell(),this.createNewCell(),this.updateBoard(i(this,S))}},{key:"createNewCell",value:function(){for(var t=[],e=0;e<i(this,S).length;e++)for(var s=0;s<i(this,S).length;s++)0===i(this,S)[e][s]&&t.push({gridPos:e,cellPos:s});var n=Math.floor(Math.random()*t.length),a=t[n],r=a.gridPos,h=a.cellPos;i(this,S)[r][h]=1===Math.floor(10*Math.random())+1?4:2}},{key:"restart",value:function(){a(this,L,!1),this.messageStart.classList.remove("hidden"),r(this,N,J).call(this),r(this,T,z).call(this),i(this,b).removeController();for(var t=0;t<i(this,S).length;t++)for(var e=0;e<i(this,S).length;e++)i(this,S)[t][e]=0;this.updateBoard(i(this,S))}},{key:"updateBoard",value:function(t){this.tbody.innerHTML="";for(var e=0;e<t.length;e++){for(var i=m("field-row"),s=0;s<t.length;s++){var n=g("field-cell"),a=t[e][s];n.classList.add("field-cell"),a>0&&(n.classList.add("field-cell--".concat(a)),n.textContent=a),i.append(n)}this.tbody.append(i)}}}]),e}();function K(t,e){i(this,S)[t][e-1]===i(this,S)[t][e]&&(i(this,S)[t][e-1]=2*i(this,S)[t][e-1],i(this,S)[t][e]=0,a(this,k,i(this,k)+i(this,S)[t][e-1]))}function P(t,e){i(this,S)[t][e]===i(this,S)[t][e+1]&&(i(this,S)[t][e+1]=2*i(this,S)[t][e+1],i(this,S)[t][e]=0,a(this,k,i(this,k)+i(this,S)[t][e+1]))}function R(t,e){i(this,S)[t][e]===i(this,S)[t+1][e]&&(i(this,S)[t+1][e]=2*i(this,S)[t+1][e],i(this,S)[t][e]=0,a(this,k,i(this,k)+i(this,S)[t+1][e]))}function x(t,e){i(this,S)[t][e]===i(this,S)[t-1][e]&&(i(this,S)[t-1][e]=2*i(this,S)[t-1][e],i(this,S)[t][e]=0,a(this,k,i(this,k)+i(this,S)[t-1][e]))}function A(t,e,i){i===c.left&&r(this,M,K).call(this,t,e),i===c.right&&r(this,W,P).call(this,t,e)}function O(t,e,i){i===c.down&&r(this,C,R).call(this,t,e),i===c.up&&r(this,D,x).call(this,t,e)}function j(){this.htmlScore.textContent=i(this,k)}function J(){a(this,k,0),r(this,q,j).call(this)}function z(){this.messageLose.classList.add("hidden"),this.messageWin.classList.add("hidden")}var H=function(t,e){e.classList.contains(f.start)?(t.start(),e.classList.remove(f.start),e.classList.add(f.restart),e.textContent=w(f.restart)):(e.classList.add(f.start),e.classList.remove(f.restart),e.textContent=w(f.start),t.restart())},F=new U,G=document.querySelector("button");G.addEventListener("click",function(){H(F,G)})}();
//# sourceMappingURL=index.977a21be.js.map
